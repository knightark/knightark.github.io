
 <!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="UTF-8">
  
    <title>快速搭建一个Fabric 1.0的环境 | 个人博客</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="knightark">
    

    
    <meta name="description" content="快速搭建一个Fabric 1.0的环境        之前笔者写了一篇Fabric1.0 Beta的部署和Fabric 1.0的多机部署。但是很多人在部署Fabric的时候还是很容易出问题，所以我就再把Fabric 1.0的单机环境搭建讲一下。其实很多内容和前面博客相同。下面开始我们的环境搭建工作： 1. 使用VirtualBox并在其中安装好Ubuntu这一步其实没啥好说的，下载好最新">
<meta property="og:type" content="article">
<meta property="og:title" content="快速搭建一个Fabric 1.0的环境">
<meta property="og:url" content="https://knightark.github.io/2021/01/14/%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAFabric%201.0%E7%9A%84%E7%8E%AF%E5%A2%83/index.html">
<meta property="og:site_name" content="个人博客">
<meta property="og:description" content="快速搭建一个Fabric 1.0的环境        之前笔者写了一篇Fabric1.0 Beta的部署和Fabric 1.0的多机部署。但是很多人在部署Fabric的时候还是很容易出问题，所以我就再把Fabric 1.0的单机环境搭建讲一下。其实很多内容和前面博客相同。下面开始我们的环境搭建工作： 1. 使用VirtualBox并在其中安装好Ubuntu这一步其实没啥好说的，下载好最新">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://common.cnblogs.com/images/copycode.gif">
<meta property="og:image" content="https://images2017.cnblogs.com/blog/2625/201708/2625-20170827011641027-2107798541.png">
<meta property="og:image" content="https://images2017.cnblogs.com/blog/2625/201708/2625-20170827011641683-1252819356.png">
<meta property="og:image" content="https://images2017.cnblogs.com/blog/2625/201708/2625-20170827011642605-1181691371.png">
<meta property="og:image" content="https://images2017.cnblogs.com/blog/2625/201708/2625-20170827011643808-618079413.png">
<meta property="og:image" content="https://images2017.cnblogs.com/blog/2625/201708/2625-20170827011644808-1886430963.png">
<meta property="og:image" content="https://img-blog.csdnimg.cn/2020072910592520.png">
<meta property="article:published_time" content="2021-01-14T01:45:46.000Z">
<meta property="article:modified_time" content="2021-06-08T03:37:12.296Z">
<meta property="article:author" content="knightark">
<meta property="article:tag" content="blogs">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://common.cnblogs.com/images/copycode.gif">

    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/%02.css">
<link rel="stylesheet" href="/.css">

<meta name="generator" content="Hexo 5.4.0"></head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="个人博客" title="个人博客"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="个人博客">个人博客</a></h1>
				<h2 class="blog-motto"></h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">主页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/about">关于</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:knightark.github.io">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2021/01/14/快速搭建一个Fabric 1.0的环境/" title="快速搭建一个Fabric 1.0的环境" itemprop="url">快速搭建一个Fabric 1.0的环境</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="knightark" target="_blank" itemprop="author">knightark</a>
		
  <p class="article-time">
    <time datetime="2021-01-14T01:45:46.000Z" itemprop="datePublished"> Published 2021-01-14</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contents</strong>
		
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAFabric-1-0%E7%9A%84%E7%8E%AF%E5%A2%83"><span class="toc-number">1.</span> <span class="toc-text">     快速搭建一个Fabric 1.0的环境        </span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BD%BF%E7%94%A8VirtualBox%E5%B9%B6%E5%9C%A8%E5%85%B6%E4%B8%AD%E5%AE%89%E8%A3%85%E5%A5%BDUbuntu"><span class="toc-number">1.0.1.</span> <span class="toc-text">1. 使用VirtualBox并在其中安装好Ubuntu</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Go%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-number">1.0.2.</span> <span class="toc-text">2. Go的安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Docker%E5%AE%89%E8%A3%85"><span class="toc-number">1.0.3.</span> <span class="toc-text">3. Docker安装</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#https-cr-console-aliyun-com-accelerator"><span class="toc-number">1.0.3.0.0.1.</span> <span class="toc-text">https:&#x2F;&#x2F;cr.console.aliyun.com&#x2F;#&#x2F;accelerator</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Docker-Compose%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-number">1.0.4.</span> <span class="toc-text">4. Docker-Compose的安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Fabric%E6%BA%90%E7%A0%81%E4%B8%8B%E8%BD%BD"><span class="toc-number">1.0.5.</span> <span class="toc-text">5. Fabric源码下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-Fabric-Docker%E9%95%9C%E5%83%8F%E7%9A%84%E4%B8%8B%E8%BD%BD"><span class="toc-number">1.0.6.</span> <span class="toc-text">6. Fabric Docker镜像的下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%90%AF%E5%8A%A8Fabric%E7%BD%91%E7%BB%9C%E5%B9%B6%E5%AE%8C%E6%88%90ChainCode%E7%9A%84%E6%B5%8B%E8%AF%95"><span class="toc-number">1.0.7.</span> <span class="toc-text">7.启动Fabric网络并完成ChainCode的测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E6%89%8B%E5%8A%A8%E6%B5%8B%E8%AF%95%E4%B8%80%E4%B8%8BFabric%E7%BD%91%E7%BB%9C"><span class="toc-number">1.0.8.</span> <span class="toc-text">8.手动测试一下Fabric网络</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%90%AD%E5%BB%BAfabric-2-2-0%E7%89%88%E6%9C%AC"><span class="toc-number">2.</span> <span class="toc-text">搭建fabric 2.2.0版本</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8EFabric%E7%9A%84%E7%AE%80%E5%8D%95Web%E5%BA%94%E7%94%A8"><span class="toc-number">3.</span> <span class="toc-text">基于Fabric的简单Web应用</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Fabric%E5%92%8CFabric-Sample"><span class="toc-number">4.</span> <span class="toc-text">安装Fabric和Fabric-Sample</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BDFabric-Samples%E3%80%81docker-compose%E5%9B%BE%E5%83%8F%E5%92%8C%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%E3%80%82"><span class="toc-number">4.1.</span> <span class="toc-text">下载Fabric Samples、docker-compose图像和二进制文件。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AB%98%E7%BA%A7%E4%B8%8B%E8%BD%BD%E9%80%89%E9%A1%B9"><span class="toc-number">4.2.</span> <span class="toc-text">高级下载选项</span></a></li></ol></li></ol>
		
		</div>
		
		<h1 id="快速搭建一个Fabric-1-0的环境"><a href="#快速搭建一个Fabric-1-0的环境" class="headerlink" title="     快速搭建一个Fabric 1.0的环境        "></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/studyzy/p/7437157.html">     快速搭建一个Fabric 1.0的环境        </a></h1><p>之前笔者写了一篇Fabric1.0 Beta的部署和Fabric 1.0的多机部署。但是很多人在部署Fabric的时候还是很容易出问题，所以我就再把Fabric 1.0的单机环境搭建讲一下。其实很多内容和前面博客相同。下面开始我们的环境搭建工作：</p>
<h3 id="1-使用VirtualBox并在其中安装好Ubuntu"><a href="#1-使用VirtualBox并在其中安装好Ubuntu" class="headerlink" title="1. 使用VirtualBox并在其中安装好Ubuntu"></a>1. 使用VirtualBox并在其中安装好Ubuntu</h3><p>这一步其实没啥好说的，下载好最新版的VirtualBox，下载Ubuntu Server，我用的是Ubuntu16.04.2 X64 Server。在安装完Ubuntu后，需要保证apt source是国内的，不然如果是国外的话会很慢很慢的。具体做法是</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/apt/sources.list</span><br></pre></td></tr></table></figure>

<p>打开这个apt源列表，如果其中看到是<a href="http://us.xxxxxx之类的，那么就是外国的，如果看到是[http://cn.xxxxx](http://cn.xxxxx/)之类的，那么就不用换的。我的是美国的源，所以需要做一下批量的替换。在命令模式下，输入：">http://us.xxxxxx之类的，那么就是外国的，如果看到是[http://cn.xxxxx](http://cn.xxxxx/)之类的，那么就不用换的。我的是美国的源，所以需要做一下批量的替换。在命令模式下，输入：</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">:%s/us./cn./g</span><br></pre></td></tr></table></figure>

<p>就可以把所有的us.改为cn.了。然后输入:wq即可保存退出。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure>

<p>更新一下源。</p>
<p>然后安装ssh，这样接下来就可以用putty或者SecureCRT之类的客户端远程连接Ubuntu了。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ssh</span><br></pre></td></tr></table></figure>

<h3 id="2-Go的安装"><a href="#2-Go的安装" class="headerlink" title="2. Go的安装"></a>2. Go的安装</h3><p>Ubuntu的apt-get虽然提供了Go的安装，但是版本比较旧，最好的方法还是参考官方网站<a target="_blank" rel="noopener" href="https://golang.org/dl/"> https://golang.org/dl/</a> ，下载最新版的Go。具体涉及到的命令包括：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://storage.googleapis.com/golang/go1.9.linux-amd64.tar.gz</span><br><span class="line">sudo tar -C /usr/local -xzf go1.9.linux-amd64.tar.gz</span><br><span class="line">【注意：不要使用apt方式安装go，apt的go版本太低了！】</span><br></pre></td></tr></table></figure>

<p>接下来编辑当前用户的环境变量：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi ~/.profile</span><br></pre></td></tr></table></figure>

<p>添加以下内容：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> GOROOT=/usr/<span class="built_in">local</span>/go </span><br><span class="line"><span class="built_in">export</span> GOPATH=<span class="variable">$HOME</span>/go </span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$GOROOT</span>/bin:<span class="variable">$GOPATH</span>/bin</span><br></pre></td></tr></table></figure>

<p>编辑保存并退出vi后，记得把这些环境载入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.profile</span><br></pre></td></tr></table></figure>

<p>我们把go的目录GOPATH设置为当前用户的文件夹下，所以记得创建go文件夹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br><span class="line">mkdir go</span><br></pre></td></tr></table></figure>

<h3 id="3-Docker安装"><a href="#3-Docker安装" class="headerlink" title="3. Docker安装"></a>3. Docker安装</h3><p>我们可以使用阿里提供的镜像，安装也非常方便。通过以下命令来安装Docker</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL http://acs-public-mirror.oss-cn-hangzhou.aliyuncs.com/docker-engine/internet | sh -</span><br></pre></td></tr></table></figure>

<p>安装完成后需要修改当前用户（我使用的用户叫fabric）权限：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -aG docker fabric</span><br></pre></td></tr></table></figure>

<p>注销并重新登录，然后添加阿里云的Docker Hub镜像：</p>
<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://obou6wyb.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>

<p><a href="javascript:void(0);"><img src="https://common.cnblogs.com/images/copycode.gif" alt="复制代码"></a></p>
<p>不同的版本添加方法是不一样的，官方的文档如下：</p>
<h6 id="https-cr-console-aliyun-com-accelerator"><a href="#https-cr-console-aliyun-com-accelerator" class="headerlink" title="https://cr.console.aliyun.com/#/accelerator"></a><a target="_blank" rel="noopener" href="https://cr.console.aliyun.com/#/accelerator">https://cr.console.aliyun.com/#/accelerator</a></h6><p>当然觉得阿里云镜像不好用，喜欢用DaoClound的也可以用DaoClound的镜像。DaoCloud的镜像设置文档为：<a target="_blank" rel="noopener" href="https://www.daocloud.io/mirror#accelerator-doc">https://www.daocloud.io/mirror#accelerator-doc</a></p>
<h3 id="4-Docker-Compose的安装"><a href="#4-Docker-Compose的安装" class="headerlink" title="4. Docker-Compose的安装"></a>4. Docker-Compose的安装</h3><p>Docker-compose是支持通过模板脚本批量创建Docker容器的一个组件。在安装Docker-Compose之前，需要安装Python-pip，运行脚本：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install python-pip</span><br></pre></td></tr></table></figure>

<p>然后是安装docker-compose，我们从官方网站（<a target="_blank" rel="noopener" href="https://github.com/docker/compose/releases%EF%BC%89%E4%B8%8B%E8%BD%BD%E4%B9%9F%E5%8F%AF%E4%BB%A5%E4%BB%8E%E5%9B%BD%E5%86%85%E7%9A%84%E8%BF%9B%E8%A1%8CDaoClound%E4%B8%8B%E8%BD%BD%EF%BC%8C%E4%B8%BA%E4%BA%86%E9%80%9F%E5%BA%A6%E5%BF%AB%E6%8E%A5%E4%B8%8B%E6%9D%A5%E4%BB%8EDaoClound%E5%AE%89%E8%A3%85Docker-compose%EF%BC%8C%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC%EF%BC%9A">https://github.com/docker/compose/releases）下载也可以从国内的进行DaoClound下载，为了速度快接下来从DaoClound安装Docker-compose，运行脚本：</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -L https://get.daocloud.io/docker/compose/releases/download/1.12.0/docker-compose-`uname -s`-`uname -m` &gt; ~/docker-compose</span><br><span class="line">sudo mv ~/docker-compose /usr/local/bin/docker-compose </span><br><span class="line">chmod +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>

<h3 id="5-Fabric源码下载"><a href="#5-Fabric源码下载" class="headerlink" title="5. Fabric源码下载"></a>5. Fabric源码下载</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">我们可以使用Git命令下载源码，首先需要建立对应的目录，然后进入该目录，Git下载源码：</span><br><span class="line">mkdir -p ~/go/src/github.com/hyperledger </span><br><span class="line">cd ~/go/src/github.com/hyperledger </span><br><span class="line">git clone https://github.com/hyperledger/fabric.git</span><br></pre></td></tr></table></figure>

<p>由于Fabric一直在更新，所有我们并不需要最新最新的源码，需要切换到v1.0.0版本的源码即可：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/go/src/github.com/hyperledger/fabric</span><br><span class="line">git checkout v1.0.0</span><br></pre></td></tr></table></figure>

<h3 id="6-Fabric-Docker镜像的下载"><a href="#6-Fabric-Docker镜像的下载" class="headerlink" title="6. Fabric Docker镜像的下载"></a>6. Fabric Docker镜像的下载</h3><p>这个其实很简单，因为我们已经设置了Docker Hub镜像地址，所以下载也会很快。官方文件也提供了批量下载的脚本。我们直接运行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd ~/go/src/github.com/hyperledger/fabric/examples/e2e_cli/</span><br><span class="line">source download-dockerimages.sh -c x86_64-1.0.0 -f x86_64-1.0.0</span><br></pre></td></tr></table></figure>

<p>这样就可以下载所有需要的Fabric Docker镜像了。由于我们设置了国内的镜像，所以下载应该是比较快的。</p>
<p>下载完毕后，我们运行以下命令检查下载的镜像列表：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure>

<p>得到的结果如下：</p>
<p><a target="_blank" rel="noopener" href="http://images2017.cnblogs.com/blog/2625/201708/2625-20170827011640246-1728691070.png"><img src="https://images2017.cnblogs.com/blog/2625/201708/2625-20170827011641027-2107798541.png" alt="image"></a></p>
<h3 id="7-启动Fabric网络并完成ChainCode的测试"><a href="#7-启动Fabric网络并完成ChainCode的测试" class="headerlink" title="7.启动Fabric网络并完成ChainCode的测试"></a>7.启动Fabric网络并完成ChainCode的测试</h3><p>我们仍然停留在e2e_cli文件夹，这里提供了启动、关闭Fabric网络的自动化脚本。我们要启动Fabric网络，并自动运行Example02 ChainCode的测试，执行一个命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./network_setup.sh up</span><br></pre></td></tr></table></figure>

<p>这个做了以下操作：</p>
<p>7.1编译生成Fabric公私钥、证书的程序，程序在目录：fabric/release/linux-amd64/bin</p>
<p>7.2基于configtx.yaml生成创世区块和通道相关信息，并保存在channel-artifacts文件夹。</p>
<p>7.3基于crypto-config.yaml生成公私钥和证书信息，并保存在crypto-config文件夹中。</p>
<p>7.4基于docker-compose-cli.yaml启动1Orderer+4Peer+1CLI的Fabric容器。</p>
<p>7.5在CLI启动的时候，会运行scripts/script.sh文件，这个脚本文件包含了创建Channel，加入Channel，安装Example02，运行Example02等功能。</p>
<p>最后运行完毕，我们可以看到这样的界面：</p>
<p><a target="_blank" rel="noopener" href="http://images2017.cnblogs.com/blog/2625/201708/2625-20170827011641402-630275537.png"><img src="https://images2017.cnblogs.com/blog/2625/201708/2625-20170827011641683-1252819356.png" alt="image"></a></p>
<p>如果您看到这个界面，这说明我们整个Fabric网络已经通了。</p>
<h3 id="8-手动测试一下Fabric网络"><a href="#8-手动测试一下Fabric网络" class="headerlink" title="8.手动测试一下Fabric网络"></a>8.手动测试一下Fabric网络</h3><p>我们仍然是以现在安装好的Example02为例，在官方例子中，channel名字是mychannel，链码的名字是mycc。我们首先进入CLI，我们重新打开一个命令行窗口，输入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it cli bash</span><br></pre></td></tr></table></figure>

<p>运行以下命令可以查询a账户的余额：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode query -C mychannel -n mycc -c &#x27;&#123;&quot;Args&quot;:[&quot;query&quot;,&quot;a&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure>

<p>可以看到余额是90：</p>
<p><a target="_blank" rel="noopener" href="http://images2017.cnblogs.com/blog/2625/201708/2625-20170827011642293-539000747.png"><img src="https://images2017.cnblogs.com/blog/2625/201708/2625-20170827011642605-1181691371.png" alt="image"></a></p>
<p>然后，我们试一试把a账户的余额再转20元给b账户，运行命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">peer chaincode invoke -o orderer.example.com:7050  --tls true --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem  -C mychannel -n mycc -c &#x27;&#123;&quot;Args&quot;:[&quot;invoke&quot;,&quot;a&quot;,&quot;b&quot;,&quot;20&quot;]&#125;&#x27;</span><br></pre></td></tr></table></figure>

<p>运行结果为：</p>
<p><a target="_blank" rel="noopener" href="http://images2017.cnblogs.com/blog/2625/201708/2625-20170827011643293-1007730667.png"><img src="https://images2017.cnblogs.com/blog/2625/201708/2625-20170827011643808-618079413.png" alt="image"></a></p>
<p>现在转账完毕， 我们试一试再查询一下a账户的余额，没问题的话，应该是只剩下70了。我们看看实际情况：</p>
<p><a target="_blank" rel="noopener" href="http://images2017.cnblogs.com/blog/2625/201708/2625-20170827011644449-1112093661.png"><img src="https://images2017.cnblogs.com/blog/2625/201708/2625-20170827011644808-1886430963.png" alt="image"></a></p>
<p>果然，一切正常。最后我们要关闭Fabric网络，首先需要运行exit命令退出cli容器。关闭Fabric的命令与启动类似，命令为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd ~/go/src/github.com/hyperledger/fabric/examples/e2e_cli</span><br><span class="line"></span><br><span class="line">./network_setup.sh down</span><br></pre></td></tr></table></figure>

<p>现在我们整个Fabric的环境已经测试完毕，恭喜，一切正常，接下来我们就是去做自己的区块链的开发。希望我的文章对大家有所帮助。</p>
<h1 id="搭建fabric-2-2-0版本"><a href="#搭建fabric-2-2-0版本" class="headerlink" title="搭建fabric 2.2.0版本"></a>搭建fabric 2.2.0版本</h1><p>首先创建文件夹</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span>                  <span class="comment">#cd 不加内容是默认返回Home文件夹</span></span><br><span class="line">mkdir -p go/src/github.com/hyperledger/</span><br><span class="line"><span class="comment">#进入刚刚创建的文件夹内</span></span><br><span class="line"><span class="built_in">cd</span> go/src/github.com/hyperledger/</span><br></pre></td></tr></table></figure>

<p>从github上拉取fabric的源码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git clone &quot;https://github.com/hyperledger/fabric.git&quot;</span><br><span class="line">cd fabric/</span><br><span class="line">cd scripts/</span><br><span class="line">#这一步会下载官方的例子以及所需要的Docker镜像</span><br><span class="line">#下载是比较慢的，如果出现错误或者长时间没有速度只需要重新运行就可以了</span><br><span class="line">sudo ./bootstrap.sh </span><br></pre></td></tr></table></figure>

<p><del>注意：运行bootstrap.sh会下载很多东西，大约1~2个G，有点慢，国内把这个官网墙了，所以我们才需要之前设置镜像源，当时我就是在这里用daocloud或者aliyun怎么都下不下来，后来换了163的才好。可能有部分文件还是会下不下来，只要多运行几遍就好了。</del></p>
<p><del>到此fabric2.2环境就已经搭建好了。</del></p>
<p>使用帮助命令</p>
<blockquote>
<p>./bootstrap.sh -h</p>
<p>Usage: bootstrap.sh [version [ca_version]] [options]</p>
<p>options:<br>-h : this help<br>-d : bypass docker image download<br>-s : bypass fabric-samples repo clone<br>-b : bypass download of platform-specific binaries</p>
<p>e.g. bootstrap.sh 2.2.0 1.4.7 -s<br>will download docker images and binaries for Fabric v2.2.0 and Fabric CA v1.4.7</p>
</blockquote>
<blockquote>
</blockquote>
<p>使用其他工具下载二进制文件，我是用的是IDM，下载网址是这个<a target="_blank" rel="noopener" href="https://github.com/hyperledger/fabric/releases/download/v2.2.0/hyperledger-fabric-linux-amd64-2.2.0.tar.gz%EF%BC%8C%E7%84%B6%E5%90%8E%E6%8A%8A%E6%96%87%E4%BB%B6%E6%94%BE%E5%88%B0fabric-samples%E4%B8%AD%E8%A7%A3%E5%8E%8B%EF%BC%8C%E5%B0%B1%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E4%BA%86%E3%80%82">https://github.com/hyperledger/fabric/releases/download/v2.2.0/hyperledger-fabric-linux-amd64-2.2.0.tar.gz，然后把文件放到fabric-samples中解压，就可以使用了。</a></p>
<p>使用命令行可以跳过二进制文件的检查</p>
<blockquote>
<p>./bootstrap.sh -b</p>
</blockquote>
<p>全部下载完成后，会多出一个fabric-samples文件夹，这是个测试网络样例可以让你体验或者测试。</p>
<p>切换到fabric-samples文件夹:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd fabric-samples</span><br></pre></td></tr></table></figure>

<p>切换到test-network：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd test-network/</span><br></pre></td></tr></table></figure>

<p>启动测试网络：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ./network.sh up</span><br></pre></td></tr></table></figure>

<p>如果没出现错误，说明你的fabric已经搭建好了。</p>
<p><img src="https://img-blog.csdnimg.cn/2020072910592520.png" alt="img"></p>
<h1 id="基于Fabric的简单Web应用"><a href="#基于Fabric的简单Web应用" class="headerlink" title="基于Fabric的简单Web应用"></a>基于Fabric的简单Web应用</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_40185499/article/details/104023543">https://blog.csdn.net/qq_40185499/article/details/104023543</a></p>
<p>Fabric官网<a target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/prereqs.html">https://hyperledger-fabric.readthedocs.io/en/latest/prereqs.html</a></p>
<p>根据官网的说法，要运行Fabric示例有以下几步</p>
<p>环境配置：go，docker ，docker-compose，git</p>
<h1 id="安装Fabric和Fabric-Sample"><a href="#安装Fabric和Fabric-Sample" class="headerlink" title="安装Fabric和Fabric-Sample"></a>安装Fabric和Fabric-Sample</h1><p>请在按照这些安装说明操作之前安装<a target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/prereqs.html">先决条件</a>。</p>
<p>为了更好的理解 Fabric，我们使用docker-compose创建了一个简单的Fabric测试网络，以及一组展示其核心功能的示例应用程序。</p>
<p>下面说明中的 cURL 命令设置您的环境，以便您可以运行Fabric测试网络。具体来说，它执行以下步骤：</p>
<ul>
<li>克隆<a target="_blank" rel="noopener" href="https://github.com/hyperledger/fabric-samples">hyperledger/fabric-samples</a>储存库。</li>
<li>下载最新的超ledgerFabric 的docker 镜像，并将它们标记为<code>latest</code></li>
<li>下载hyperledgerF abric CLI工具二进制文件，并将文件配置到和目录中。这些二进制文件将帮助您与测试网络进行交互。将/bin和/config放到fabric-samples中<ul>
<li><code>configtxgen</code>,</li>
<li><code>configtxlator</code>,</li>
<li><code>cryptogen</code>,</li>
<li><code>discover</code>,</li>
<li><code>idemixgen</code>,</li>
<li><code>orderer</code>,</li>
<li><code>osnadmin</code>,</li>
<li><code>peer</code>,</li>
<li><code>fabric-ca-client</code>,</li>
<li><code>fabric-ca-server</code></li>
</ul>
</li>
</ul>
<h2 id="下载Fabric-Samples、docker-compose图像和二进制文件。"><a href="#下载Fabric-Samples、docker-compose图像和二进制文件。" class="headerlink" title="下载Fabric Samples、docker-compose图像和二进制文件。"></a>下载Fabric Samples、docker-compose图像和二进制文件。</h2><p>下载到`fabric-samples目录。这是go-long社区对go项目的建议。如果您使用的是其他目录或 Windows，请参阅下面的<a target="_blank" rel="noopener" href="https://hyperledger-fabric.readthedocs.io/en/latest/install.html#notes">说明</a>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir -p $HOME/go/src/github.com/&lt;your_github_userid&gt;</span><br><span class="line">$ cd $HOME/go/src/github.com/&lt;your_github_userid&gt;</span><br></pre></td></tr></table></figure>

<p>下载最新发布的FabricSamples、码头图像和二进制文件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -sSL https://bit.ly/2ysbOFE | bash -s</span><br></pre></td></tr></table></figure>

<p>您已完成将FabricSamples、docker-compose图像和二进制文件安装到您的系统中。</p>
<h2 id="高级下载选项"><a href="#高级下载选项" class="headerlink" title="高级下载选项"></a>高级下载选项</h2><p>要查看下载脚本的帮助和可用命令，请使用带有 cURL 命令的标记：<code>-h</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL https://bit.ly/2ysbOFE | bash -s -- -h</span><br></pre></td></tr></table></figure>

<p>要下载特定版本，请通过Fabric和Fabric CA Docker 图像的版本标识符。下面的命令演示了如何下载最新的生产版本 - 和<code>Fabric v2.3.1``Fabric CA v1.4.9</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL https://bit.ly/2ysbOFE | bash -s -- &lt;fabric_version&gt; &lt;fabric-ca_version&gt;</span><br><span class="line">curl -sSL https://bit.ly/2ysbOFE | bash -s -- 2.3.1 1.4.9</span><br></pre></td></tr></table></figure>







<p>安装Fabric和fabric-sample</p>
<p>安装所需的环境go，docker ，docker-compose，git</p>
<p>下载fabric-sample源码</p>
<p>git clone <a target="_blank" rel="noopener" href="https://github.com/hyperledger/fabric-samples">https://github.com/hyperledger/fabric-samples</a></p>
<p>切换版本到v2.2.0</p>
<p>git checkout v2.2.0</p>
<p>下载平台相关的二进制文件</p>
<p><a target="_blank" rel="noopener" href="https://github.com/hyperledger/fabric/releases/download/v2.2.0/hyperledger-fabric-linux-amd64-2.2.0.tar.gz">https://github.com/hyperledger/fabric/releases/download/v2.2.0/hyperledger-fabric-linux-amd64-2.2.0.tar.gz</a></p>
<p>解压压缩文件中的bin和config文件夹到fabric-sample中去</p>
<p>切换到test-network：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd test-network/</span><br></pre></td></tr></table></figure>

<p>启动测试网络：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ./network.sh up</span><br></pre></td></tr></table></figure>

<p>如果没出现错误，说明你的fabric已经搭建好了。</p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">


</div>



	<div class="article-share" id="share">
	
	  <div data-url="https://knightark.github.io/2021/01/14/%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAFabric%201.0%E7%9A%84%E7%8E%AF%E5%A2%83/" data-title="快速搭建一个Fabric 1.0的环境 | 个人博客" data-tsina="" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2021/01/19/NetCore跨平台桌面框架Avalonia的OSX程序打包/" title="NetCore跨平台桌面框架Avalonia的OSX程序打包">
  <strong>上一篇：</strong><br/>
  <span>
  NetCore跨平台桌面框架Avalonia的OSX程序打包</span>
</a>
</div>


<div class="next">
<a href="/2021/01/13/苦艾酒 笔记/"  title="苦艾酒 笔记">
 <strong>下一篇：</strong><br/> 
 <span>苦艾酒 笔记
</span>
</a>
</div>

</nav>

	



</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
 
 <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAFabric-1-0%E7%9A%84%E7%8E%AF%E5%A2%83"><span class="toc-number">1.</span> <span class="toc-text">     快速搭建一个Fabric 1.0的环境        </span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BD%BF%E7%94%A8VirtualBox%E5%B9%B6%E5%9C%A8%E5%85%B6%E4%B8%AD%E5%AE%89%E8%A3%85%E5%A5%BDUbuntu"><span class="toc-number">1.0.1.</span> <span class="toc-text">1. 使用VirtualBox并在其中安装好Ubuntu</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Go%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-number">1.0.2.</span> <span class="toc-text">2. Go的安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Docker%E5%AE%89%E8%A3%85"><span class="toc-number">1.0.3.</span> <span class="toc-text">3. Docker安装</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#https-cr-console-aliyun-com-accelerator"><span class="toc-number">1.0.3.0.0.1.</span> <span class="toc-text">https:&#x2F;&#x2F;cr.console.aliyun.com&#x2F;#&#x2F;accelerator</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Docker-Compose%E7%9A%84%E5%AE%89%E8%A3%85"><span class="toc-number">1.0.4.</span> <span class="toc-text">4. Docker-Compose的安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Fabric%E6%BA%90%E7%A0%81%E4%B8%8B%E8%BD%BD"><span class="toc-number">1.0.5.</span> <span class="toc-text">5. Fabric源码下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-Fabric-Docker%E9%95%9C%E5%83%8F%E7%9A%84%E4%B8%8B%E8%BD%BD"><span class="toc-number">1.0.6.</span> <span class="toc-text">6. Fabric Docker镜像的下载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%90%AF%E5%8A%A8Fabric%E7%BD%91%E7%BB%9C%E5%B9%B6%E5%AE%8C%E6%88%90ChainCode%E7%9A%84%E6%B5%8B%E8%AF%95"><span class="toc-number">1.0.7.</span> <span class="toc-text">7.启动Fabric网络并完成ChainCode的测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E6%89%8B%E5%8A%A8%E6%B5%8B%E8%AF%95%E4%B8%80%E4%B8%8BFabric%E7%BD%91%E7%BB%9C"><span class="toc-number">1.0.8.</span> <span class="toc-text">8.手动测试一下Fabric网络</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%90%AD%E5%BB%BAfabric-2-2-0%E7%89%88%E6%9C%AC"><span class="toc-number">2.</span> <span class="toc-text">搭建fabric 2.2.0版本</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8EFabric%E7%9A%84%E7%AE%80%E5%8D%95Web%E5%BA%94%E7%94%A8"><span class="toc-number">3.</span> <span class="toc-text">基于Fabric的简单Web应用</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Fabric%E5%92%8CFabric-Sample"><span class="toc-number">4.</span> <span class="toc-text">安装Fabric和Fabric-Sample</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8B%E8%BD%BDFabric-Samples%E3%80%81docker-compose%E5%9B%BE%E5%83%8F%E5%92%8C%E4%BA%8C%E8%BF%9B%E5%88%B6%E6%96%87%E4%BB%B6%E3%80%82"><span class="toc-number">4.1.</span> <span class="toc-text">下载Fabric Samples、docker-compose图像和二进制文件。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AB%98%E7%BA%A7%E4%B8%8B%E8%BD%BD%E9%80%89%E9%A1%B9"><span class="toc-number">4.2.</span> <span class="toc-text">高级下载选项</span></a></li></ol></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  


  
<div class="categorieslist">
	<p class="asidetitle">Categories</p>
		<ul>
		
		  
			<li><a href="/categories/C/" title="C#">C#<sup>21</sup></a></li>
		  
		
		  
			<li><a href="/categories/CI-CD/" title="CI/CD">CI/CD<sup>9</sup></a></li>
		  
		
		  
			<li><a href="/categories/DDD/" title="DDD">DDD<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/JAVA/" title="JAVA">JAVA<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/WPF/" title="WPF">WPF<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/linux/" title="linux">linux<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/linx/" title="linx">linx<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/nodejs/" title="nodejs">nodejs<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/产品/" title="产品">产品<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/前端/" title="前端">前端<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/大数据/" title="大数据">大数据<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/工具/" title="工具">工具<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/装机/" title="装机">装机<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/软件/" title="软件">软件<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/软件开发过程/" title="软件开发过程">软件开发过程<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">Tags</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/C/" title="C#">C#<sup>21</sup></a></li>
			
		
			
				<li><a href="/tags/linux/" title="linux">linux<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/WPF/" title="WPF">WPF<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/工具/" title="工具">工具<sup>6</sup></a></li>
			
		
			
				<li><a href="/tags/docker/" title="docker">docker<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/dotnetcore/" title="dotnetcore">dotnetcore<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/通信/" title="通信">通信<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/docker-compose/" title="docker-compose">docker-compose<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/MVVM/" title="MVVM">MVVM<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/MVVM-light/" title="MVVM light">MVVM light<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/ci-cd/" title="ci/cd">ci/cd<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/Docker/" title="Docker">Docker<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/CI-CD/" title="CI/CD">CI/CD<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/reactor/" title="reactor">reactor<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/chart/" title="chart">chart<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/SoA/" title="SoA">SoA<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/代理/" title="代理">代理<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/nginx/" title="nginx">nginx<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/生产者消费者/" title="生产者消费者">生产者消费者<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/消息通信/" title="消息通信">消息通信<sup>2</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
    </ul>
</div>

</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Knight Ark. <br/>
			This is my blog.</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/2176287895" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		
		
		
		
		
		
		
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="https://github.com/wuchong/jacman" target="_blank" title="Jacman">Jacman</a> © 2021 
		
		<a href="/about" target="_blank" title="knightark">knightark</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>











<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
